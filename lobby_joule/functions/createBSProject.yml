parameters:
  - name: projectName
  - name: projectDescription

action_groups:
  - actions:
      - type: api-request
        method: POST
        system_alias: REGISTRY
        path: /v1/applicationdevelopment/lobby/projects
        headers:
          Accept: application/json
          Authorization: "Bearer <TOEKN>"
        body:
          name: <? projectName ?>
          type: "com.sap.project.spa"
          description: <? projectDescription ?>
        result_variable: projects

  - condition: projects.status_code != 201
    actions:
      - type: message
        message:
          type: text
          content: "❌ Error: Something went wrong. Please try again later."

  - condition: projects.status_code == 409
    actions:
      - type: message
        message:
          type: text
          content: "❌ Error: Project with name '<? projectName ?>' already exists."

  - actions:
      - type: message
        message:
          type: text
          content: "<? projects.body.name?>"
